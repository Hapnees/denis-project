# Импорт основного модуля PyInstaller
# PyInstaller используется для создания исполняемых файлов из Python-приложений
import PyInstaller.__main__

# Запуск процесса сборки приложения с помощью PyInstaller
# run() принимает список аргументов командной строки
PyInstaller.__main__.run([
    # Основной файл приложения, который будет точкой входа
    'run.py',
    
    # Имя выходного исполняемого файла
    '--name=BookSearch',
    
    # Создать один исполняемый файл вместо директории с зависимостями
    '--onefile',
    
    # Добавить директорию templates в сборку
    # Формат: 'исходный_путь:путь_в_сборке'
    '--add-data=templates:templates',
    
    # Добавить директорию static в сборку
    # Содержит статические файлы (CSS, JavaScript, изображения)
    '--add-data=static:static',
    
    # Явно указать зависимость от Jinja2
    # Необходимо для работы с HTML-шаблонами
    '--hidden-import=jinja2',
    
    # Явно указать зависимости uvicorn для работы с асинхронными циклами
    # Необходимо для корректной работы веб-сервера
    '--hidden-import=uvicorn.loops.auto',
    
    # Явно указать зависимости uvicorn для работы с HTTP-протоколом
    # Необходимо для обработки HTTP-запросов
    '--hidden-import=uvicorn.protocols.http.auto',
])